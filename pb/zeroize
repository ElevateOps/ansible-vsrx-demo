---
- name: Junos ZEROIZE devices
  hosts: all
  connection: local
  gather_facts: no
  vars:
    via_tty: no
    via_netconf: no
    user: None
    passwd: None
  vars_prompt:
    zeroize: "Enter zeroize to continue"

  tasks:
    - name: Via TTY
      junos_zeroize: 
        zeroize={{ zeroize }}
        tty='-t={{ TERMSERV }},{{ TERMSERVPORT }}'
        user={{ user }}
        passwd={{ passwd }}
      when: via_tty

    - name: Via NETCONF
      junos_zeroize: 
        zeroize={{ zeroize }}
        host={{ inventory_hostname }}
        user={{ user }}
        passwd={{ passwd }}
      when: via_netconf      